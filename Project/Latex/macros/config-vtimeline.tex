%% Code by Claudio:
%% https://tex.stackexchange.com/a/197447/221452
%% Uses code by Andrew:
%% http://tex.stackexchange.com/a/28452/13304

% CAUSA CIERTOS PROBLEMAS CON {TBLR}

\makeatletter
\let\matamp=&
\catcode`\&=13
\def&{%
        \iftikz@is@matrix%
            \pgfmatrixnextcell%
        \else%
            \matamp%
        \fi%
    }
\makeatother

\newcounter{lines}
\def\endlr{\stepcounter{lines}\\}

\newcounter{vtml}
\setcounter{vtml}{0}

\newif\ifvtimelinetitle
\newif\ifvtimebottomline

\tikzset{
    description/.style={column 2/.append style={#1}},
    timeline color/.store in=\vtmlcolor,
    timeline color=red!80!black,
    timeline color st/.style={fill=\vtmlcolor,draw=\vtmlcolor},
    use timeline header/.is if=vtimelinetitle,
    use timeline header=false,
    add bottom line/.is if=vtimebottomline,
    add bottom line=false,
    timeline title/.store in=\vtimelinetitle,
    timeline title={},
    line offset/.store in=\lineoffset,
    line offset=4pt,
}

\NewEnviron{vtimeline}[1][]{%
    \setcounter{lines}{1}%
    \stepcounter{vtml}%
    \begin{tikzpicture}[column 1/.style={anchor=east},
            column 2/.style={anchor=west},
            text depth=0pt,
            text height=1ex,
            row sep=1ex,
            column sep=1em,
            #1
        ]
        \matrix(vtimeline\thevtml)[matrix of nodes]{\BODY};
        \pgfmathtruncatemacro\endmtx{\thelines-1}

        \path[timeline color st]
        ($(vtimeline\thevtml-1-1.north east)!0.5!(vtimeline\thevtml-1-2.north west)$)--
        ($(vtimeline\thevtml-\endmtx-1.south east)!0.5!(vtimeline\thevtml-\endmtx-2.south west)$);

        \foreach \x in {1,...,\endmtx}{
                \node[circle,timeline color st, inner sep=0.15pt, draw=white, thick]
                (vtimeline\thevtml-c-\x) at
                ($(vtimeline\thevtml-\x-1.east)!0.5!(vtimeline\thevtml-\x-2.west)$){};
                \draw[timeline color st](vtimeline\thevtml-c-\x.west)--++(-3pt,0);
            }

        \ifvtimelinetitle%
            \draw[timeline color st]([yshift=\lineoffset]vtimeline\thevtml.north west)--
            ([yshift=\lineoffset]vtimeline\thevtml.north east);

            \node[anchor=west,yshift=16pt,font=\large]
            at (vtimeline\thevtml-1-1.north west)
            {\textsc{Timeline \thevtml}: \textit{\vtimelinetitle}};
        \else%
            \relax%
        \fi%

        \ifvtimebottomline%
            \draw[timeline color st]([yshift=-\lineoffset]vtimeline\thevtml.south west)--
            ([yshift=-\lineoffset]vtimeline\thevtml.south east);
        \else%
            \relax%
        \fi%
    \end{tikzpicture}
}

% \usepackage[amsthm]{newpxtext}
% \usepackage[amsthm]{newpxmath}

% \setsansfont{texgyreheros}[
%     Scale=MatchLowercase,
%     UprightFont=*-regular,
%     BoldFont=*-bold,
%     ItalicFont=*-italic,
%     BoldItalicFont=*-bolditalic,
% ]






% \begin{vtimeline}[timeline color=cyan!80!blue, add bottom line, line offset=2pt, use timeline header,timeline title={Hitos de las redes neuronales artificiales}]
%     1676        & The Chain Rule \cite{leibniz2012early}                                                    \endlr
%     1847        & Augustin-Louis Cauchy \cite{lemarechal2012cauchy}                                         \endlr
%     1943        & Threshold Logic Unit (TLU) \cite{mcculloch1943logical}                                    \endlr
%     1949        & Teor√≠a Hebbiana                                                                           \endlr
%     1958        & Perceptron \cite{rosenblatt1958perceptron}                                                \endlr
%     1959-1960   & Adaline y Madaline \cite{rosenblatt1958perceptron}                                        \endlr
%     1965        & Multilayer Perceptron (MLP) \cite{baum1988capabilities}                                   \endlr
%     1967-1968   & Deep Learning by Stochastic Gradient Descent \cite{karplus19671967}                       \endlr
%     1980`s      & Neuronas Sigmoidales                                                                      \endlr
%     ~           & Feedforward neural network (FNN) \cite{rumelhart1985learning}                             \endlr
%     ~           & Backpropagation (BP) \cite{rosenblatt1962principles,etde_5080493,lecun1985learning}       \endlr
%     1985        & Boltzmann Machine \cite{ACKLEY1985147}                                                    \endlr
%     1987        & Adaptive resonance theory (ART) \cite{grossberg1987competitive}                           \endlr
%     1989        & Convolutional neural networks (CNN) \cite{lecun1989backpropagation}                       \endlr
%     ~           & Recurent neural networks (RNN) \cite{schmidhuber1993habilitation}                         \endlr
%     1990        & Generative Adversarial Networks (GAN) as Game \cite{schmidhuberunsupervised}              \endlr
%     1997        & Long short term memory (LSTM) \cite{Hochreiter1997LongSM, hochreiter1997long}             \endlr
%     2006        & Deep Belief Networks (DBN) \cite{hinton2006fast}                                          \endlr
%     ~           & Restricted Boltzmann Machine \cite{hinton2006reducing}                                    \endlr
%     ~           & Encoder / Decoder (Auto-encoder) \cite{hinton2006reducing}                                \endlr
%     2014        & Generative Adversarial Networks (GAN) Moderns \cite{6294131,goodfellow2014generative}     \endlr
%     2018        & Style Generative Adversarial Networks (Style-GAN) \cite{karras2019stylebased}             \endlr
% \end{vtimeline}

